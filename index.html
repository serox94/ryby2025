<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ryby 2025 DreamTeam</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: linear-gradient(rgba(255,255,255,0.8), rgba(255,255,255,0.8)), url('tlo.jpg') no-repeat center center fixed;
            background-size: cover;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        h1, h2 {
            font-family: 'Montserrat', sans-serif;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        h1 {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 30px;
            color: var(--secondary);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        
        h2 {
            font-size: 1.5rem;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 5px;
            margin-top: 25px;
        }
        
        section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        #timer {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent);
        }
        
        #currentTime {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        #weatherData {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        #weatherData p {
            background-color: var(--light);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: inherit;
            resize: vertical;
        }
        
        iframe {
            border: none;
            border-radius: 10px;
            margin-top: 10px;
        }
        
        a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: bold;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        #alertsBox {
            padding: 15px;
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            margin-top: 10px;
            border-radius: 5px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            section {
                padding: 15px;
            }
            
            #weatherData {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Ryby 2025 DreamTeam</h1>
        <p id="currentTime"></p>

        <section id="countdown">
            <h2>Odliczanie do startu</h2>
            <p id="timer"></p>
            <small>Cel: 1 czerwca 2025, godz. 14:00</small>
        </section>

        <section id="weather">
            <h2>Aktualna pogoda w Enschede</h2>
            <div id="weatherData">Wczytywanie danych pogodowych...</div>
            <button onclick="loadWeather()">Odśwież dane</button>
        </section>

        <section id="forecast">
            <h2>Prognoza na 1-7 czerwca 2025</h2>
            <div id="forecastData">Wczytywanie prognozy...</div>
        </section>

        <section id="carpCalendar">
            <h2>Kalendarz brań (karp)</h2>
            <iframe src="https://kalendarz-rybaka.pl" width="100%" height="400"></iframe>
        </section>

        <section id="rigs">
            <h2>Przypony i wiązanie haków</h2>
            <p><a href="https://www.youtube.com/results?search_query=przypony+karpiowe+wiązanie+haku" target="_blank">Zobacz poradniki na YouTube</a></p>
        </section>

        <section id="lakeMap">
            <h2>Mapa łowiska</h2>
            <a href="https://maps.google.com?q=Rutbekerveldweg+275,+7548+PP+Enschede" target="_blank">Otwórz w Google Maps</a>
        </section>

        <section id="logbook">
            <h2>Dziennik połowów</h2>
            <textarea id="logText" rows="10" placeholder="Zapisz datę, czas, przynętę, wynik, miejsce..."></textarea>
        </section>

        <section id="baitPlan">
            <h2>Harmonogram przynęt</h2>
            <textarea id="baitSchedule" rows="5">8:00–16:00 - Kulka 16mm truskawkowa
16:00–20:00 - Kukurydza + pellet
20:00–04:00 - Kulka 20mm rybna</textarea>
        </section>

        <section id="alerts">
            <h2>Alerty pogodowe</h2>
            <div id="alertsBox">Brak alertów</div>
        </section>
    </div>

<script>
// Licznik
const targetDate = new Date("2025-06-01T14:00:00").getTime();

function updateCountdown() {
    const now = new Date().getTime();
    const distance = targetDate - now;
    
    if (distance < 0) {
        document.getElementById("timer").textContent = "Wyprawa rozpoczęta!";
        return;
    }
    
    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);
    
    document.getElementById("timer").innerHTML = `
        <span style="font-size:2rem">${days}</span> dni 
        <span style="font-size:2rem">${hours}</span> godz. 
        <span style="font-size:2rem">${minutes}</span> min 
        <span style="font-size:2rem">${seconds}</span> sek
    `;
}

setInterval(updateCountdown, 1000);
updateCountdown();

// Czas
function updateCurrentTime() {
    const now = new Date();
    const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit', 
        minute: '2-digit',
        second: '2-digit'
    };
    document.getElementById("currentTime").textContent = now.toLocaleDateString("pl-PL", options);
}

setInterval(updateCurrentTime, 1000);
updateCurrentTime();

// Pogoda
async function loadWeather() {
    const apiKey = "fd3ff3668ce17f7d6ffe3073a1fb8a68";
    document.getElementById("weatherData").innerHTML = '<p>Ładowanie danych...</p>';
    
    try {
        const res = await axios.get(`https://api.openweathermap.org/data/2.5/weather?q=Enschede,NL&units=metric&lang=pl&appid=${apiKey}`);
        const w = res.data;
        
        // Ikona pogody
        const iconUrl = `https://openweathermap.org/img/wn/${w.weather[0].icon}@2x.png`;
        const iconHtml = `<img src="${iconUrl}" alt="${w.weather[0].description}" style="vertical-align:middle">`;
        
        document.getElementById("weatherData").innerHTML = `
            <p><strong>Temperatura:</strong> ${Math.round(w.main.temp)}°C ${iconHtml}</p>
            <p><strong>Warunki:</strong> ${w.weather[0].description}</p>
            <p><strong>Odczuwalna:</strong> ${Math.round(w.main.feels_like)}°C</p>
            <p><strong>Wiatr:</strong> ${Math.round(w.wind.speed * 3.6)} km/h</p>
            <p><strong>Ciśnienie:</strong> ${w.main.pressure} hPa</p>
            <p><strong>Wilgotność:</strong> ${w.main.humidity}%</p>
        `;
        
        checkWeatherAlerts(w);
    } catch (err) {
        document.getElementById("weatherData").innerHTML = `
            <p style="color:red">Nie udało się pobrać danych pogodowych.</p>
            <p>${err.message}</p>
        `;
    }
}

// Alerty pogodowe
function checkWeatherAlerts(weatherData) {
    const alerts = [];
    
    if (weatherData.wind.speed > 5) {
        alerts.push(`Silny wiatr (${Math.round(weatherData.wind.speed * 3.6)} km/h) - utrudnione zarzucanie`);
    }
    
    if (weatherData.weather[0].main === 'Rain') {
        alerts.push("Opady deszczu - przygotuj nieprzemakalne ubranie");
    }
    
    if (weatherData.main.temp < 10) {
        alerts.push("Niska temperatura - ciepłe ubranie obowiązkowe");
    }
    
    const alertsBox = document.getElementById("alertsBox");
    if (alerts.length > 0) {
        alertsBox.innerHTML = `<strong>⚠️ Aktywne alerty:</strong><ul>${
            alerts.map(alert => `<li>${alert}</li>`).join('')
        }</ul>`;
        alertsBox.style.backgroundColor = '#f8d7da';
        alertsBox.style.borderLeft = '5px solid #dc3545';
    } else {
        alertsBox.innerHTML = "Brak aktywnych alertów pogodowych";
        alertsBox.style.backgroundColor = '#d4edda';
        alertsBox.style.borderLeft = '5px solid #28a745';
    }
}

// Prognoza (symulowana)
function loadForecast() {
    const forecastContainer = document.getElementById("forecastData");
    forecastContainer.innerHTML = `
        <div style="display: flex; overflow-x: auto; gap: 15px; padding: 10px 0;">
            ${Array.from({length: 7}, (_, i) => {
                const date = new Date(2025, 5, i+1);
                return `
                    <div style="min-width: 120px; background: #f8f9fa; padding: 10px; border-radius: 8px; text-align: center;">
                        <strong>${date.toLocaleDateString('pl-PL', {day: 'numeric', month: 'long'})}</strong>
                        <p>${['Słonecznie', 'Lekkie zachmurzenie', 'Pochmurno', 'Przelotne opady'][i % 4]}</p>
                        <p>${15 + i}°C / ${10 + i}°C</p>
                    </div>
                `;
            }).join('')}
        </div>
        <p style="margin-top: 10px; font-size: 0.9em;">* Symulowane dane. Prawdziwa prognoza będzie dostępna bliżej terminu.</p>
    `;
}

// Inicjalizacja
loadWeather();
loadForecast();

// Automatyczne odświeżanie pogody co 30 minut
setInterval(loadWeather, 30 * 60 * 1000);

// Automatyczne zapisywanie dziennika
const logText = document.getElementById("logText");
const baitSchedule = document.getElementById("baitSchedule");

// Ładowanie zapisanych danych
if (localStorage.getItem('fishingLog')) {
    logText.value = localStorage.getItem('fishingLog');
}

if (localStorage.getItem('baitSchedule')) {
    baitSchedule.value = localStorage.getItem('baitSchedule');
}

// Zapisywanie przy zmianie
logText.addEventListener('input', () => {
    localStorage.setItem('fishingLog', logText.value);
});

baitSchedule.addEventListener('input', () => {
    localStorage.setItem('baitSchedule', baitSchedule.value);
});
</script>
</body>
</html>